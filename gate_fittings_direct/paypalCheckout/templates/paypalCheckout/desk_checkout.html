{% extends "base.html" %}
{% load static %}
{% load bag_tools %}
{% load mathfilters %}

{% block content %}
    <div class="row">
        <div class="col-7">
            <div class="box-element" id="form-container">
                <form action="" id="checkout-form">
                    <div class="user-info">
                        <div class="form-field">
                            <input type="text" name="name" placeholder="Full Name" required>
                        </div>
                        <div class="form-field">
                            <input type="email" name="email" placeholder="Email" required>
                        </div>
                    </div>
                    <div class="shipping-info">
                        <p>Post To</p>
                        <div class="form-field">
							<input class="form-control" type="text" name="address" placeholder="Address">
						</div>
						<div class="form-field">
							<input class="form-control" type="text" name="city" placeholder="City">
						</div>
						<div class="form-field">
							<input class="form-control" type="text" name="state" placeholder="County">
						</div>
						<div class="form-field">
							<input class="form-control" type="text" name="postcode" placeholder="Post Code">
						</div>
                    </div>
                    <input type="submit" id="continue-checkout" class="btn btn-block" value="Continue">
                </form>
            </div>
            <div class="box-element hidden" id="payment-info">
				<small>Paypal Options</small>
			</div>
        </div>
        <div class="col-5">
            <div class="order-preview-container">
                <div class="order-title-container">
                    <span>Summary</span>
                </div>
                <div class="order-items-container">
                    {% for item in bag_items %}
                        <a href="{% url 'product_detail' item.product.id %}" class="text-black">
                            <div class="row mb-3">
                                <div class="col-3">
                                    {% if item.product.image %}
                                        <img class="w-100" src="../../../media/{{ item.product.image }}" alt="{{ product.name }}">
                                    {% else %}
                                        <img class="w-100" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}">
                                    {% endif %}
                                </div>
                                <div class="col-7">
                                    <p>{{ item.product.name }}</p>
                                    <p>Quantity: {{ item.quantity }}</p>
                                </div>
                                <div class="col-2 text-right">
                                    <p>£{{ item.product.price }}</p>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                    <div class="row mt-3">
                        <div class="col-7">
                            <p class="mb-1">Subtotal <span class="text-muted">(exc. VAT):</span></p>
                            <p class="mb-1">VAT:</p>
                            <p class="mb-1">Shipping:</p>
                            <p class="mt-2"><strong>Order Total </strong><span class="text-muted">(inc. VAT):</span></p>
                        </div>
                        <div class="col-5 text-right">
                            <p class="mb-1">£{{ total | div:1.2 | floatformat:2}}</p>
                            <p class="mb-1">£{{ total | div:1.2 | mul:0.2 | floatformat:2 }}</p>
                            <p class="mb-1">£{{ delivery | floatformat:2 }}</p>
                            <p class="mt-2"><strong>£{{ grand_total | floatformat:2 }}</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}